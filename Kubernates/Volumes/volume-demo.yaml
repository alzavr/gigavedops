apiVersion: v1
kind: Pod
metadata:
  name: volume-demo
spec:
  containers:
    - name: writer
      image: busybox
      command: ["/bin/sh", "-c"]
      args:
        - |
          while true; do
            echo "Message at $(date)" >> /data/shared.txt;
            sleep 2;
          done
      volumeMounts:
        - name: shared-data
          mountPath: /data

    - name: reader
      image: busybox
      command: ["/bin/sh", "-c"]
      args:
        - |
          while true; do
            echo "Reader sees:";
            cat /data/shared.txt;
            echo "----";
            sleep 3;
          done
      volumeMounts:
        - name: shared-data
          mountPath: /data

  volumes:
    - name: shared-data
      emptyDir: {}